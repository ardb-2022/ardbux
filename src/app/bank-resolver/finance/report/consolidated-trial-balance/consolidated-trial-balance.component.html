<ng-template #content let-modal data-keyboard="false" data-backdrop="false">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Report Criteria</h4>
      <button type="button" class="close text-danger" aria-label="Close" data-dismiss="modal" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div *ngIf="showAlert" class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>Error! </strong> {{alertMsg}}
        <button  type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="closeAlert()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
  
      <form [formGroup]="reportcriteria">
        <div>
          <label for="fromDate">Trial Date</label>
          <div class="input-group">
            <input type="text" placeholder="dd/mm/yyyy" class="form-control" disabled bsDatepicker
              formControlName="fromDate" [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY', containerClass:'theme-dark-blue' }"
              [isOpen]="isOpenFromDp">
            <div class="input-group-append">
              <button mat-raised-button class="btn btn-outline-secondary" type="button" (click)="isOpenFromDp = !isOpenFromDp">
                <i class="fa fa-calendar" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button mat-raised-button class="btn btn-primary" (click)="SubmitReport()">Submit</button> &nbsp;
      <button mat-raised-button class="btn btn-light" (click)="modalRef.hide()">Close</button>
    </div>
  </ng-template>
  <div class="row d-flex justify-content-center align-items-center pt-4"
    style="background-color: #78c2ad21; min-height: 20vh;">
  
    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 shadow-sm mb-4 bg-white p-3">
      <div>
        <button mat-raised-button type="button" class="btn btn-rounded btn-primary m-1" (click)="closeScreen()">Close</button>
        <!-- <button mat-raised-button type="button" class="btn btn-rounded btn-primary m-1" (click)="downloadexcel()">Export as CSV</button> -->
        <button mat-raised-button type="button" 
        class="btn btn-rounded btn-primary m-1" 
        [useExistingCss]="true"
        printSectionId="mattable" 
        ngxPrint>Print</button>
        <button mat-raised-button type="button" class="btn btn-rounded btn-primary m-1" (click)="onLoadScreen(content)">Retrieve</button>
        
      </div>
    </div>
  
    <!-- <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 shadow-lg mb-4 bg-white p-3"> -->
    <div class="col-xs-12 col-sm-12 shadow-lg mb-4 bg-white p-3 ">
       
      <!-- <div class="justify-content-center" style="text-align:center" *ngIf="reportData">
        <div style="display:inline-block">
          <h6>{{ardbName}} {{branchName}}</h6>
        </div>
        <h6>Run Date & Time : {{today}} </h6> <br>
        <h6> <u> Trial Balance as on {{this.reportcriteria.controls.fromDate.value.toDateString()| date: 'dd/MM/yyyy'}}</u></h6>
      </div> -->
     
      <div class="mat-elevation-z8" id="mattable">
       
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>
    <!-- <mat-paginator [length]="resultLength" showFirstLastButtons [pageSizeOptions]="[1,2,3,resultLength]" MatPaginator></mat-paginator> -->
  
      <!-- <ng-container matColumnDef="acc_type">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Account Type </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <ng-container>
           {{element.acc_type.acc_type}}
          </ng-container>
         
          </mat-cell>
      </ng-container> -->
      <!-- <ng-container matColumnDef="mainHeader"> 
        <th mat-header-cell *matHeaderCellDef mat-sort-header style="text-align:center">  -->
        <!-- <div  *ngIf="reportData">
              
          <div style="display:inline-block">
  
            <h4>{{ardbName}} ({{branchName}})</h4>
          </div>
          <h4>Run Date & Time : {{today}} </h4> <br>
          <h4> <u> Trial Balance as on {{this.reportcriteria.controls.fromDate.value.toDateString()| date: 'dd/MM/yyyy'}}</u></h4>
        </div> -->
      <!-- </th>
      </ng-container> -->
   
      <ng-container matColumnDef="acc_cd">
        <th mat-header-cell *matHeaderCellDef style="text-align: center; height: 150px;">  <h3>{{ardbName}} ({{branchName}})</h3><br>
            <h3>Run Date & Time : {{today}} </h3> <br>
            <h3> <u> Consolidated Trial Balance as on {{this.reportcriteria.controls.fromDate.value.toDateString()| date: 'dd/MM/yyyy'}}</u></h3>
          </th>
        <td mat-cell *matCellDef="let element"> 
          <ng-container>
            <table id="trialbalance">
              
              <thead>
                <th> Code</th>
                <th> Name</th>
                <th class="showSum"> Debit</th>
                <th class="showSum"> Credit</th>
                <tr>
                  <td colspan="4" style="text-align:center;font-weight:700;"> {{element.acc_type.acc_type}} </td>
                </tr>
              </thead>
              <!-- style="page-break-after: always;" -->
              
              <tbody  *ngFor="let trial of element.trailbalance; let itr=index;">
  
                <tr >
                  <td>{{trial.acc_cd}} </td>
                  <td>{{trial.acc_name}} </td>
                  <td class="showSum">{{trial.dr| currency:'INR'}} </td>
                  <td class="showSum">{{trial.cr| currency:'INR'}} </td>
                </tr>
                <tr >
                  <ng-container style="font-weight: 700;" *ngIf="liAccCd == trial.acc_cd">
        
                    <td colspan="2" class="showSumTotal">Total: </td>
                    <td class="showSumTotal">{{liDrSum | currency:'INR'}}</td>
                    <td class="showSumTotal">{{liCrSum | currency:'INR'}}</td>
        
        
                  </ng-container>
                  <ng-container style="font-weight: 700;" *ngIf="asAccCd == trial.acc_cd">
        
                    <td colspan="2" class="showSumTotal">Total: </td>
                    <td class="showSumTotal">{{asDrSum | currency:'INR'}}</td>
                    <td class="showSumTotal">{{asCrSum | currency:'INR'}}</td>
        
        
                  </ng-container>
                  <ng-container style="font-weight: 700;" *ngIf=" revAccCd == trial.acc_cd">
        
                    <td colspan="2" class="showSumTotal">Total: </td>
                    <td class="showSumTotal">{{revDrSum | currency:'INR'}}</td>
                    <td class="showSumTotal">{{revCrSum | currency:'INR'}}</td>
        
        
                  </ng-container>
                  <ng-container style="font-weight: 700;" *ngIf="exAccCd == trial.acc_cd">
        
                    <td colspan="2" class="showSumTotal">Total: </td>
                    <td class="showSumTotal">{{exDrSum | currency:'INR'}}</td>
                    <td class="showSumTotal">{{exCrSum | currency:'INR'}}</td>
        
        
                  </ng-container>
        
                  <!-- <ng-container *ngIf="i.acc_type==1 && itr==liNum-1">
                <td colspan="3">Total: </td>
                <td>{{liCrSum}}</td>
                <td>{{liCrSum}}</td>
              </ng-container> -->
        
                </tr>
                <tr>
                  <ng-container style="font-weight: 700;" *ngIf="exAccCd == trial.acc_cd">
                      <td colspan="2" class="showSumTotal">Grand total: </td>
                      <td class="showSumTotal">{{exDrSum+liDrSum+asDrSum+revDrSum | currency:'INR'}}</td>
                      <td class="showSumTotal">{{exCrSum+liCrSum+asCrSum+revCrSum | currency:'INR'}}</td>
                  </ng-container>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                 <td>&nbsp;</td>
                 <td>&nbsp;</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                 </tr>
               
              </tfoot>
            </table>
          </ng-container>
        
          
        </td>
        </ng-container>
          
            
         
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <!-- <tr mat-header-row *matHeaderRowDef="['mainHeader']"></tr> -->
      <tr mat-row *matRowDef="let element; columns: displayedColumns;"></tr>
      <!-- <tr mat-footer-row *matFooterRowDef="displayedColumns" class="example-first-footer-row"></tr> -->
    <!-- <tr mat-footer-row *matFooterRowDef="['disclaimer']" class="example-second-footer-row"></tr> -->
    </table>
    <footer>
      <small>
        This Report Is Generated Through Synergic Banking, Developed By Synergic Softek Solutions Pvt.Ltd. Kolkata
       </small>
     </footer>
    </div>
    <mat-paginator [length]="resultLength" showFirstLastButtons [pageSizeOptions]="[1,2,3,resultLength]" MatPaginator></mat-paginator>
    
      <pagination hidden style="float:right;" [totalItems]="reportData?.length" [itemsPerPage]="itemsPerPage"
        [boundaryLinks]="true" [directionLinks]="true" [maxSize]="5" [(ngModel)]="currentPage" name="currentPage"
        (pageChanged)="pageChanged($event)" (pageBoundsCorrection)="pageChanged($event)"></pagination>
     
       <table hidden class="p-3" id="trial">
        <tr *ngIf="reportData">
          <!-- <th></th> -->
          <th>Account Type</th>
          <th>Acc cd</th>
          <th>Name</th>
          <th style="text-align: right;">Debit</th>
          <th style="text-align: right;">Credit</th>
        </tr>
        <tbody *ngFor="let i of pagedItems; let itr=index;">
          <tr>
  
            <ng-container>
              <!-- <td>{{itr}}</td> -->
              <td *ngIf="i.acc_type==1">Liability</td>
              <td *ngIf="i.acc_type==2">Asset</td>
              <td *ngIf="i.acc_type==3">Revenue</td>
              <td *ngIf="i.acc_type==4">Expense</td>
              <td>{{i.acc_cd}}</td>
              <td>{{i.acc_name}}</td>
              <td style="text-align: right;">{{i.dr  | currency:'INR'}}</td>
              <td style="text-align: right;">{{i.cr  | currency:'INR'}}</td>
  
            </ng-container>
          </tr>
          <tr>
            <ng-container style="font-weight: 700;" *ngIf="i.acc_type==1 && liAccCd == i.acc_cd">
  
              <td colspan="3" style="font-weight: 700;text-align: right;">Total: </td>
              <td style="font-weight: 700;text-align: right;">{{liDrSum | currency:'INR'}}</td>
              <td style="font-weight: 700;text-align: right;">{{liCrSum | currency:'INR'}}</td>
  
  
            </ng-container>
            <ng-container style="font-weight: 700;" *ngIf="i.acc_type==2 && asAccCd == i.acc_cd">
  
              <td colspan="3" style="font-weight: 700;text-align: right;">Total: </td>
              <td style="font-weight: 700;text-align: right;">{{asDrSum | currency:'INR'}}</td>
              <td style="font-weight: 700;text-align: right;">{{asCrSum | currency:'INR'}}</td>
  
  
            </ng-container>
            <ng-container style="font-weight: 700;" *ngIf="i.acc_type==3 && revAccCd == i.acc_cd">
  
              <td colspan="3" style="font-weight: 700;text-align: right;">Total: </td>
              <td style="font-weight: 700;text-align: right;">{{revDrSum | currency:'INR'}}</td>
              <td style="font-weight: 700;text-align: right;">{{revCrSum | currency:'INR'}}</td>
  
  
            </ng-container>
            <ng-container style="font-weight: 700;" *ngIf="i.acc_type==4 && exAccCd == i.acc_cd">
  
              <td colspan="3" style="font-weight: 700;text-align: right;">Total: </td>
              <td style="font-weight: 700;text-align: right;">{{exDrSum | currency:'INR'}}</td>
              <td style="font-weight: 700;text-align: right;">{{exCrSum | currency:'INR'}}</td>
  
  
            </ng-container>
  
            <!-- <ng-container *ngIf="i.acc_type==1 && itr==liNum-1">
          <td colspan="3">Total: </td>
          <td>{{liCrSum}}</td>
          <td>{{liCrSum}}</td>
        </ng-container> -->
  
          </tr>
          <tr style="font-weight: 700;" *ngIf="i.acc_type==4 && exAccCd == i.acc_cd">
            <td colspan="3">Grand total: </td>
            <td style="text-align: right;">{{exDrSum+liDrSum+asDrSum+revDrSum | currency:'INR'}}</td>
            <td style="text-align: right;">{{exCrSum+liCrSum+asCrSum+revCrSum | currency:'INR'}}</td>
          </tr>
        </tbody>
        <!-- <tfoot>
          <tr>
            <td colspan="3"> <small>
              This Report Is Generated Through Synergic Banking, Developed By Synergic Softek Solutions Pvt.Ltd. Kolkata
             </small> </td>
          </tr>
          
         </tfoot> -->
      </table>
     
      <div hidden id="hiddenTab">
        <div class="justify-content-center" style="text-align:center">
          <h4>{{ardbName}} {{branchName}}</h4>
          <h4>Run Date & Time : {{today}} </h4> <br>
          <h4> <u> Trial Balance as on {{this.reportcriteria.controls.fromDate.value.toDateString()| date: 'dd/MM/yyyy'}}</u></h4>
        </div>
        <table class="p-3" id="trial1" class="mkSmall">
        <thead>
          <tr *ngIf="reportData">
            <!-- <th></th> -->
            <th>Account Type</th>
            <th>Acc cd</th>
            <th>Name</th>
            <th style="text-align: right;">Debit</th>
            <th style="text-align: right;">Credit</th>
          </tr>
        </thead>
         
          <tbody *ngFor="let i of reportData; let itr=index;">
            <tr>
    
              <ng-container>
                <!-- <td>{{itr}}</td> -->
                <td *ngIf="i.acc_type==1">Liability</td>
                <td *ngIf="i.acc_type==2">Asset</td>
                <td *ngIf="i.acc_type==3">Revenue</td>
                <td *ngIf="i.acc_type==4">Expense</td>
                <td>{{i.acc_cd}}</td>
                <td>{{i.acc_name}}</td>
                <td style="text-align: right;">{{i.dr | currency:'INR'}}</td>
                <td style="text-align: right;">{{i.cr  | number : '1.2-2'}}</td>
    
              </ng-container>
            </tr>
            <tr>
              <ng-container style="font-weight: 700;" *ngIf="i.acc_type==1 && liAccCd == i.acc_cd">
    
                <td colspan="3" style="font-weight: 700;text-align: right;">Total: </td>
                <td style="font-weight: 700;text-align: right;">{{liDrSum | number : '1.2-2'}}</td>
                <td style="font-weight: 700;text-align: right;">{{liCrSum | number : '1.2-2'}}</td>
    
    
              </ng-container>
              <ng-container style="font-weight: 700;" *ngIf="i.acc_type==2 && asAccCd == i.acc_cd">
    
                <td colspan="3" style="font-weight: 700;text-align: right;">Total: </td>
                <td style="font-weight: 700;text-align: right;">{{asDrSum | number : '1.2-2'}}</td>
                <td style="font-weight: 700;text-align: right;">{{asCrSum | number : '1.2-2'}}</td>
    
    
              </ng-container>
              <ng-container style="font-weight: 700;" *ngIf="i.acc_type==3 && revAccCd == i.acc_cd">
    
                <td colspan="3" style="font-weight: 700;text-align: right;">Total: </td>
                <td style="font-weight: 700;text-align: right;">{{revDrSum | number : '1.2-2'}}</td>
                <td style="font-weight: 700;text-align: right;">{{revCrSum | number : '1.2-2'}}</td>
    
    
              </ng-container>
              <ng-container style="font-weight: 700;" *ngIf="i.acc_type==4 && exAccCd == i.acc_cd">
    
                <td colspan="3" style="font-weight: 700;text-align: right;">Total: </td>
                <td style="font-weight: 700;text-align: right;">{{exDrSum | number : '1.2-2'}}</td>
                <td style="font-weight: 700;text-align: right;">{{exCrSum | number : '1.2-2'}}</td>
    
    
              </ng-container>
    
              <!-- <ng-container *ngIf="i.acc_type==1 && itr==liNum-1">
            <td colspan="3">Total: </td>
            <td>{{liCrSum}}</td>
            <td>{{liCrSum}}</td>
          </ng-container> -->
    
            </tr>
            <tr style="font-weight: 700;" *ngIf="i.acc_type==4 && exAccCd == i.acc_cd">
              <td colspan="3">Grand total: </td>
              <td style="text-align: right;">{{exDrSum+liDrSum+asDrSum+revDrSum | number : '1.2-2'}}</td>
              <td style="text-align: right;">{{exCrSum+liCrSum+asCrSum+revCrSum | number : '1.2-2'}}</td>
            </tr>
            
          </tbody>
          <tfoot>
            <tr>
             <td>&nbsp;</td>
             <td>&nbsp;</td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
             </tr>
           
          </tfoot>
  
        </table>
        <footer hidden>
          <small>
            This Report Is Generated Through Synergic Banking, Developed By Synergic Softek Solutions, Kolkata
           </small> 
         </footer>
        <!-- <br><br><br><br> -->
        <!-- <footer>This Report Is Generated Through Synergic Banking, Developed By Synergic Softek Solutions, Kolkata</footer> -->
      </div>
      <button mat-raised-button hidden id="chngPage" (click)="setPage(1)"></button>
      
      <!-- <iframe id="ifrmrpt" *ngIf="ReportUrl" [src]="ReportUrl" width="100%" height="700px" (load)="oniframeLoad()" allowfullscreen></iframe> -->
    </div>
  
    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 shadow-sm mb-4 bg-white p-3">
      <div>
        <button mat-raised-button type="button" class="btn btn-rounded btn-primary m-1" (click)="closeScreen()">Close</button>
        <!-- <button mat-raised-button type="button" class="btn btn-rounded btn-primary m-1" (click)="downloadexcel()">Export as CSV</button> -->
        <button mat-raised-button type="button" 
        class="btn btn-rounded btn-primary m-1" 
        [useExistingCss]="true"
        printSectionId="mattable" 
        ngxPrint>Print</button>
        <button mat-raised-button type="button" class="btn btn-rounded btn-primary m-1" (click)="onLoadScreen(content)">Retrieve</button>
      </div>
    </div>
  </div>
  <loading *ngIf="isLoading"></loading>